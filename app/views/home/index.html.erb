<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js' type='text/javascript'></script>
  <div class="col-md-12 pull-left-margin">
    <div class="col-md-8 pull-left-margin">
      <div style='width: 800px;'>
		  <div id="map" style='width: 800px; height: 500px;'>
		  	<%#= Gmaps({"polygons"=>{ "data" => @polygon, "options" => { "fillColor" => "#000" }}}) %>
		  </div>
		</div>
    </div>
    <div class="col-md-4">
      Tweet
    </div>
  </div>
  <div class="clear"></div>

  <div class="rowt">
    <div class="col-md-12">

      <%= form_tag property_infos_path, method: :post, remote: true do %>
        <%= select_tag :name, options_for_select([['Price', 'price'], ['Dispute', 'dispute'], ['Infra', 'infra'], ['Nature', 'nature']]),  class: "info_name"%>

          <%= text_field_tag :new_price, nil, :placeholder => 'new price', class: "info_name_price_options" %>
          <%= text_field_tag :price_change_reason, nil, :placeholder => 'Reason' , class: "info_name_price_options" %>

          <%= select_tag :new_infra, options_for_select(['school', 'hospital', 'highway', 'tech_park']), class: "info_name_infra_options", style: "display: none"  %>
          <%= text_field_tag :new_date, nil, :placeholder => 'By When', class: "info_name_infra_options", style: "display: none" %>

          <%= text_area_tag :comments, nil, :placeholder => 'Tweet !!!' %>
      <%end%>
    </div>
  </div>

<script type="text/javascript">
  buildMap([{"lat":12.93622319969078,"lng":77.60541558265686, "infowindow": 'Hello' }])
</script>
<script type="text/javascript">
  var handler = Gmaps.build('Google');
     handler.buildMap({ internal: {id: 'map'}}, function(){
     var polygons = handler.addPolygons(<%= @polygon.to_json.html_safe %>,
        {
        "strokeColor": "#E9E5DC",
        "strokeOpacity": 1,
				"strokeWeight": 2,
				"fillColor": '#FF0000'
        }
     );
     handler.bounds.extendWith(polygons);
     handler.fitMapToBounds();
     handler.getMap().setZoom(18);
   });
</script>

<script>
    $('.info_name').change(function(){
        if ($(this).val() == 'price'){
            $('.info_name_price_options').show()
            $('.info_name_infra_options').hide()
        }
        else if ($(this).val() == 'infra'){
            $('.info_name_price_options').hide()
            $('.info_name_infra_options').show()
        }

    })
</script>
	
